{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}

<div class="container" style="max-width: 900px; margin: auto; padding: 40px 20px;">

    <h1>{{ page.title }}</h1>

    {# --- DESCRIPTION (RichText or StreamField) --- #}
    {% if page.description %}
        <section style="margin: 20px 0;">
            {{ page.description|richtext }}
        </section>
    {% endif %}

    {# --- LISTE DES PROJETS --- #}
    <div style="margin-top: 40px;">
        {% for project in page.get_children.live %}
            <h2 style="margin-bottom:5px;">
                <a href="{{ project.url }}">{{ project.title }}</a>
            </h2>

            {% if project.specific.description %}
                <p>
                    {{ project.specific.description|richtext|truncatewords_html:40 }}
                </p>
            {% endif %}

            <hr style="margin:30px 0;">
        {% endfor %}
    </div>

</div>

{% endblock %}
